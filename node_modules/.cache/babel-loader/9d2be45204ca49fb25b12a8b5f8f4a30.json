{"ast":null,"code":"import _classCallCheck from\"A:/WorkPorjects/Skill Box/greencosmicStudy/Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"A:/WorkPorjects/Skill Box/greencosmicStudy/Frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"A:/WorkPorjects/Skill Box/greencosmicStudy/Frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"A:/WorkPorjects/Skill Box/greencosmicStudy/Frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import $api from\"../../Http/index.js\";import{setUser as _setUser,isAuth as _isAuth}from\"../../Redux/Reducers/userReducer.js\";import{loading as _loading}from\"../../Redux/Reducers/loadingReducer.js\";import Login from\"./Login.jsx\";import Preloader from\"../../Assets/Preloader/PreloaderPage.jsx\";import{Redirect}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var LoginContainer=/*#__PURE__*/function(_React$Component){_inherits(LoginContainer,_React$Component);var _super=_createSuper(LoginContainer);function LoginContainer(){var _this;_classCallCheck(this,LoginContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.login=function(_ref){var password=_ref.password,email=_ref.email;$api.post(\"/login\",{email:email,password:password}).then(function(response){console.log(response);var user={token:response.data.accessToken,username:response.data.user.username,_id:response.data.user.id,role:response.data.user.roles};_this.props.setUser(user);_this.props.loading(false);if(response.data.user.isActivated===true){_this.props.isAuth(true);}}).catch(function(error){_this.props.loading(false);console.log(\"wrong auth\");console.log(error);});};return _this;}_createClass(LoginContainer,[{key:\"render\",value:function render(){if(this.props.state.user.isAuth===true){if(this.props.state.user.role[1]&&this.props.state.user.role[1]===\"ADMIN\"){return/*#__PURE__*/_jsx(Redirect,{to:\"/admin\"});}return/*#__PURE__*/_jsx(Redirect,{to:\"/courses\"});}return/*#__PURE__*/_jsx(\"div\",{children:this.props.state.isLoading.isLoading?/*#__PURE__*/_jsx(Preloader,{}):/*#__PURE__*/_jsx(Login,{state:this.props.state,login:this.login})});}}]);return LoginContainer;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{state:state};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setUser:function setUser(user){return dispatch(_setUser(user));},loading:function loading(isLoading){return dispatch(_loading(isLoading));},isAuth:function isAuth(value){return dispatch(_isAuth(value));}};};export default connect(mapStateToProps,mapDispatchToProps)(LoginContainer);","map":{"version":3,"sources":["A:/WorkPorjects/Skill Box/greencosmicStudy/Frontend/src/Components/Authentication/LoginContainer.jsx"],"names":["React","connect","$api","setUser","isAuth","loading","Login","Preloader","Redirect","LoginContainer","login","password","email","post","then","response","console","log","user","token","data","accessToken","username","_id","id","role","roles","props","isActivated","catch","error","state","isLoading","Component","mapStateToProps","mapDispatchToProps","dispatch","value"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport $api from \"../../Http/index.js\";\r\nimport { setUser, isAuth } from \"../../Redux/Reducers/userReducer.js\";\r\nimport { loading } from \"../../Redux/Reducers/loadingReducer.js\";\r\nimport Login from \"./Login.jsx\";\r\nimport Preloader from \"../../Assets/Preloader/PreloaderPage.jsx\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass LoginContainer extends React.Component {\r\n  login = ({ password, email }) => {\r\n    $api\r\n      .post(\"/login\", { email, password })\r\n      .then((response) => {\r\n        console.log(response);\r\n        let user = {\r\n          token: response.data.accessToken,\r\n          username: response.data.user.username,\r\n          _id: response.data.user.id,\r\n          role: response.data.user.roles,\r\n        };\r\n        this.props.setUser(user);\r\n        this.props.loading(false);\r\n        if (response.data.user.isActivated === true) {\r\n          this.props.isAuth(true);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        this.props.loading(false);\r\n        console.log(\"wrong auth\");\r\n        console.log(error);\r\n      });\r\n  };\r\n  render() {\r\n    if (this.props.state.user.isAuth === true) {\r\n      if (\r\n        this.props.state.user.role[1] &&\r\n        this.props.state.user.role[1] === \"ADMIN\"\r\n      ) {\r\n        return <Redirect to=\"/admin\" />;\r\n      }\r\n      return <Redirect to=\"/courses\" />;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {this.props.state.isLoading.isLoading ? (\r\n          <Preloader />\r\n        ) : (\r\n          <Login state={this.props.state} login={this.login} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    state: state,\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    setUser: (user) => dispatch(setUser(user)),\r\n    loading: (isLoading) => dispatch(loading(isLoading)),\r\n    isAuth: (value) => dispatch(isAuth(value)),\r\n  };\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginContainer);\r\n"]},"metadata":{},"sourceType":"module"}